<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${subSystem.system.name + ', ' + subSystem.name}"></title>
    <script type="text/javascript" th:src="@{/js/get_request.js}"></script>
    <script type="text/javascript" th:src="@{/js/page_script.js}"></script>
    <script type="text/javascript" th:src="@{/js/filter_script.js}"></script>
    <script type="text/javascript" th:src="@{/js/show_script.js}"></script>
    <script th:inline="javascript">
        const page = [[${page}]];
    </script>
</head>
<body>
<div id="mainContainer">
<th:block th:replace="common/menu_header"></th:block>
<div th:text="${'Список паролей для системы ' + subSystem.system.name + ', ' + subSystem.name + ':'}"></div>
<th:block th:replace="common/filter_header"></th:block>
<table th:if="${targets.isEmpty() == false}">
    <tr>
        <td>Программа</td>
        <td>Логин</td>
        <td>Пароль</td>
        <td>Роль</td>
        <td>Комментарий</td>
        <td>Действие</td>
        <td sec:authorize="hasRole('ROLE_ADMIN') || hasRole('ROLE_USER')">Действие</td>
    </tr>
    <tr th:each="passSlice: ${targets}" th:if="${passSlice.actual == true}">
        <td th:text="${passSlice.softName}">Программа</td>
        <td th:text="${passSlice.login}">Логин</td>
        <td th:text="${passSlice.password}" class="passwordFields" th:id="${passSlice.id}">Пароль</td>
        <td th:text="${passSlice.role}">Роль</td>
        <td th:text="${passSlice.comment}">Комментарий</td>
        <td><a th:href="@{/search/history/{id}(id=${passSlice.id})}"><input type="button" value="История изменений"/></a></td>
        <td sec:authorize="hasRole('ROLE_ADMIN') || hasRole('ROLE_USER')"><a th:href="@{/edit/soft/{id}(id=${passSlice.id})}"><input type="button" value="Правка"/></a></td>
    </tr>
    <tr>
        <td></td><td></td>
        <td><input id="showAllButton" type="button" value="Показать все пароли"/></td>
        <td></td><td></td><td></td><td sec:authorize="hasRole('ROLE_ADMIN') || hasRole('ROLE_USER')"></td>
    </tr>
</table>
<hr/>
<a sec:authorize="hasRole('ROLE_ADMIN') || hasRole('ROLE_USER')" th:href="@{/add/soft/{id}(id=${subSystem.id})}"><input type="button" value="Добавить"/></a>
<th:block th:replace="common/page_footer"></th:block>
<a th:href="@{/search}"><input type="button" value="Назад"></a>
<th:block th:replace="common/slip_tongue_footer"></th:block>
</div>
</body>
</html>